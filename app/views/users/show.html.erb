<div class="container px-5 px-sm-0">
  <div class="row">

    <div class="col-md-4">
      <h2>プロフィール</h2>
      <%= image_tag @user.get_profile_image, width: 100, height: 100 %>
      <table class="table">
        <tr>
          <th>ユーザーネーム</th>
          <td><%= @user.name %></td>
        </tr>
        <tr>
          <th>自己紹介</th>
          <td><%= @user.introduction %></td>
        </tr>
        <tr>
          <th>フォロー</th>
          <th>
            <%= link_to user_followings_path(@user) do %>
              <%= @user.followings.count %>
            <% end %>
          </th>
        </tr>
        <tr>
          <th>フォロワー</th>
          <th>
            <%= link_to user_followers_path(@user) do %>
              <%= @user.followers.count %>
            <% end %>
          </th>
        </tr>
      </table>

      <% if user_signed_in? %>
        <% if current_user != @user %>
          <% if current_user.following?(@user) %>
            <%= link_to "フォロー外す", user_relationships_path(@user.id), method: :delete, class: "btn btn-info" %>
          <% else %>
            <%= link_to "フォローする", user_relationships_path(@user.id), method: :post, class: "btn btn-success" %>
          <% end %>
        <% end %>
      <% end %>

<!--ユーザー情報編集リンク-->
      <% if @user == current_user %>
        <%= link_to edit_user_path(@user.id), class: "btn btn-outline-secondary btn-block" do %>
          <i class="fa-solid fa-user-cog"></i>
        <% end %>
      <% end%>
<!--ユーザー退会ボタン-->
      <% if user_signed_in? && @user == current_user %>
        <% unless @user.email == "guest@example.com" then %>
           <div class="mt-3">
              <%= link_to "削除",user_path(current_user.id), class: "destroy-user", method: :delete, "data-confirm" => "本当にこのユーザーを削除しますか？" %>
           </div>
        <% end %>
      <% end %>
    </div>


    <div class="col-md-6">
      <h2>My Post</h2>
      <span><%=link_to"お気に入り投稿",favorites_user_path(@user) %></span>
      <table class="table">
        <thead>
          <tr>
            <th>タイトル</th>
            <th>投稿日</th>
          </tr>
        </thead>
        <tbody>
          <% @posts.each do |post| %>
          <tr>
            <td>
              <%= link_to post.title, "/posts/#{post.id}" %>
            </td>
            <td><%= post.created_at.strftime('%Y/%m/%d') %></td>
          </tr>
          <% end %>
        </tbody>
      </table>
    </div>

 </div>
</div>

